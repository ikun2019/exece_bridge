<div class="wrapper">
  <div class="container request-infomation mt-4 p-4">
    <table class="table">
      <tr>
        <td class=w-25><label class="request-label">依頼タイトル</label></td>
        <td class="request-text align-bottom w-75"><%= @request.title %></td>
      </tr>
      <tr>
        <td><label class="request-label">依頼詳細</label></td>
        <td class="request-text align-bottom"><%= @request.content %></td>
      </tr>
      <tr>
        <td><label class="request-label">予算</label></td>
        <td class="request-text align-bottom"><%= @request.budget.name %></td>
      </tr>
      <tr>
        <td><label class="request-label">期限</label></td>
        <td class="request-text align-bottom"><%= @request.term.name %></td>
      </tr>
      <tr>
        <td><label class="request-label">対応方法</label></td>
        <td class="request-text align-bottom"><%= @request.approach.name %></td>
      </tr>
      <tr>
        <td><label class="request-label">備考欄</label></td>
        <td class="request-text align-bottom"><%= @request.other %></td>
      </tr>
    </table>
    <div class="text-center">
      <% if engineer_signed_in? && @applied == true  %>
        <%= button_to "依頼をキャンセル", request_order_path(@request), method: :delete, data: {confirm: "依頼をキャンセルしてよろしいですか？"}, class: "btn btn-danger" %>
      <% elsif engineer_signed_in? && @applied == false %>
        <%= button_to "依頼を受ける", request_orders_path(@request), method: :post, class: "btn btn-success" %>
      <% elsif customer_signed_in? %>
        <label class="text-left">申請者一覧</label>
        <%= form_with model: [@request, @agree], method: :post, local: true do |f| %>
          <table class="table table-sm table-bordered">
            <tr class="text-center">
              <th style="width: 20%;">No.</th>
              <th style="width: 40%;">申請者</th>
              <th style="width: 40%;">依頼するエンジニアを選択</th>
            </tr>
            <% if @reply == true %>
              <% @request.orders.each_with_index do |order, i| %>
                <tr>
                  <td class="align-middle"><%= i + 1 %></td>
                  <td class="align-middle">
                    <%= order.engineer.nickname %>
                  </td>
                  <td>
                    <%= f.radio_button :engineer_id, order.engineer.id %>
                  </td>
                </tr>
              <% end %>
            <% end %>
          </table>
          <%= f.submit "依頼確定" %>
        <% end %>
      <% else %>
        <p>*** ログインが必要です ***</p>
      <% end %>
    </div>
  </div>
</div>